window._br_runtime&&window._br_runtime.server||function(e){var r=document.cookie.split(";"),t;for(var n=0,i=r.length,o,s;n<i;n++){if(/br-resp-key/i.test(o=r[n])){t=(s=o.split("="))&&s.length&&s[1]||"";t=t.replace(/[\'\"]/g,"");document.cookie=o+";expires="+(new Date).toGMTString();break}}function u(e){switch(typeof e){case"object":if(!e)return"null";if(e instanceof Array){for(var r="[",t=0;t<e.length;t++)r+=(t>0?",":"")+u(e[t]);return r+"]"}var r="{",t=0;for(var n in e)if("function"!=typeof e[n]){var a=u(e[n]);r+=(t>0?",":"")+u(n)+":"+a,t++}return r+"}";case"string":return'"'+e.replace(/([\"\\])/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+'"';case"number":return e.toString();case"boolean":return e?"true":"false";case"function":return u(e.toString());case"undefined":default:return'"undefined"'}}function c(){return e.location.host||""}function l(){return document.domain||""}function f(r){return e.encodeURIComponent?e.encodeURIComponent(r):r}function d(){return Date.now?Date.now():(new Date).valueOf()}function p(e){return function(e,r){}}function h(e){if(q.sended&&(this.ready()||e)&&this.errors.length){var r=[],t={};x.each(this.errors,function(e,r,n){var r=w(e.e1,e.e2,e.e3,e.e6),a=t[r];a?a.ep=a.ep+1:t[r]={o:e.e0-q.st,e:e.e1,ec:n.length,ep:1,l:e.e2||0,c:e.e3||0,m:e.e6||"",r:e.e4,s:e.e5||""}});for(var n in t){r.push(t[n])}var a=x.mkurl(q.server.beacon,"er",{});var i=r.length;x.POST(a,x.stringify({err:r}),{},function(e,r){e||H.errors.splice(0,i)})}}function v(){H.initend()}function m(){C.readyState==="complete"&&H.initend()}function g(e){function r(){H.send()}return q.load_time?true:(H.initend(),q.load_time=d(),e?r():setTimeout(r,0))}function y(){H.flush||g(true);x.bind(h,H)(true);H.sa(true);H.flush=true}function _(){x.bind(h,H)(true);H.sa(true)}function b(){H.touch||(H.touch=d())}function w(e,r,t,n){return e+r+t+(n||"")}function S(r){var t=arguments;if(t.length!=0){var n={};n.e0=d();n.e1="";n.e2=0;n.e3=0;n.e4="";if("string"==typeof r){n.e1=t[0];t.length>2&&(n.e2=t[2]||0,n.e4=t[1]);t.length>3&&(n.e3=t[3]||0)}else if(r instanceof Event||e.ErrorEvent&&r instanceof ErrorEvent){n.e1=r.message||(r.error&&r.error.constructor.name)+(r.error&&r.error.message)||"";n.e2=r.lineno||0;n.e3=r.colno||0;n.e4=r.filename||r.error&&r.error.fileName||r.target&&r.target.baseURI||"";n.e4==C.URL&&(e4="#");n.e5=null;n.e6=null;n.e7=0;if(r.error){n.e5=r.error.stack||"";n.e6=r.error.moduleName||"";var a=w(n.e1,n.e2,n.e3,n.e6);n.e7=I[a]?0:1}if(n.e1==="unknown"&&n.e4==="unknown")return}H.errors&&H.errors.push(n)}}function T(e){if(typeof e==="string"){return e.length}if(window.ArrayBuffer&&e instanceof ArrayBuffer){return e.byteLength}if(window.Blob&&e instanceof Blob){return e.size}if(e&&e.length){return e.length}return 0}function E(e){return function(){var r=arguments;if(!this._ignore){var t=x.args.apply(this,r);this._runtime={method:t[0],url:t[1],start:d()}}try{return e.apply(this,r)}catch(t){return Function.prototype.apply.call(e,this,r)}}}function k(r){return function(){function t(e){var r,t=l._runtime;if(t){t.readyState!==4&&(t.end=d());t.endAll=d();t.s=l.status;if(l.responseType==""||l.responseType=="text"){t.res=T(l.responseText)}else if(l.response){t.res=T(l.response)}else{try{t.res=T(l.responseText)}catch(e){t.res=0}}r={n:t.url,m:t.method,st:t.s,o:t.start-q.st,req:t.req,res:t.res,e:t.endAll-t.start,f:t.fb?t.fb-t.start:0,rd:t.fb?t.end-t.fb:0,cb:f||0,p:t.param};l.getAllResponseHeaders&&(r.h=(l.getAllResponseHeaders()||"").substring(0,2e3));try{r.g=r.h.toLowerCase().indexOf("br-resp-key");if(r.g==-1){r.g=""}else{l.getResponseHeader&&(r.g=l.getResponseHeader("br-resp-key"))}}catch(e){}q.aa&&q.aa.push(r);if(q.server.custom_urls&&q.server.custom_urls.length&&!H.ct){if(!q.pattern){q.pattern=[];for(var n=0;n<q.server.custom_urls.length;n++){q.pattern.push(new RegExp(q.server.custom_urls[n]))}}for(var n=0;n<q.pattern.length;n++){if(a.url.match(q.pattern[n])){H.ct=a.end+f;break}}}H.sa();l._runtime=null}}function n(){l.readyState==3&&l._runtime&&(l._runtime.fb=l._runtime.fb||d());l.readyState==4&&t(0)}function i(e){return function(){var r,t;l.readyState==3&&l._runtime&&(l._runtime.fb=l._runtime.fb||d());l.readyState==4&&l._runtime&&(l._runtime.end=r=d(),l._runtime.readyState=4);try{t=e&&e.apply(this,arguments)}catch(e){throw e}l.readyState==4&&(f=d()-r);n();return t}}function o(e){return function(){var r=l._runtime;if(r){switch(e){case"abort":t(905);break;case"error":t(990);break;case"timeout":t(903);break;case"loadstart":r.start=d();break;case"progress":case"load":case"loadend":default:break}}return true}}function s(e,r){for(var t=0;t<r.length;t++){var n=r[t];x.sh(e,n,o(n),false)}}function u(e){var r="";if(e.toString){r=e.toString()}else{r=""}return r.substring(0,2e3)}var c=arguments;if(!this._ignore){this._runtime.start=d();this._runtime.req=c[0]?T(c[0]):0;this._runtime.param=c[0]?u(c[0]):"";var l=this,f=0,p=x.wrap(false,this,"onreadystatechange",i);p||x.sh(this,"readystatechange",n,false);s(this,["error","progress","abort","load","loadstart","loadend","timeout"]);p||setTimeout(function(){x.wrap(false,l,"onreadystatechange",i)},0)}var h=function(){function r(e){var r={},t=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?/.exec(e);t&&(r.protocol=(t[1]||"http")+":",r.hostname=t[3],r.port=t[4]||"");return r}return function(t){var n=e.location;t=x.trim(t);if(t){t=t.toLowerCase();t.startsWith("//")&&(t=n.protocol+t);if(!t.startsWith("http")){return true}var a=r(t),i=a.protocol===n.protocol&&a.hostname===n.hostname;i&&(i=a.port===n.port?true:!n.port&&(n.protocol==="http:"&&a.port==="80"||n.protocol==="https"&&a.port==="443"));return i}return false}}();var v=function(){return(new Date).getTime()%1e8}();try{var m=q.server;m&&m.id&&this._runtime&&h(this._runtime.url)&&(this._runtime.r=v,this.setRequestHeader&&this.setRequestHeader("X-Request-Id",m.id+";r="+v))}catch(e){}try{return r.apply(this,c)}catch(e){return Function.prototype.apply.call(r,this,c)}}}var R=e.XMLHttpRequest,C=document,L=function(){var e=C.getElementsByTagName("base")||[];return e.length&&(_b=e[e.length-1]&&e[e.length-1].href||"")||""}();var x={wrap:function(e,r,t,n,a){try{var i=r[t]}catch(r){if(!e)return false}if(!i&&!e)return false;if(i&&i._wraped)return false;try{r[t]=n(i,a)}catch(e){return false}r[t]._wraped=i;return true},unwrap:function(e,r){try{var t=e[r]._wraped;t&&(e[r]=t)}catch(e){}},each:function(e,r){if(e){for(var t=0;t<e.length;t++){e[t]&&r&&r(e[t],t,e)}}},mkurl:function(r,t,n){var a=/^https/i.test(C.URL)?"https":"http";a+="://"+r+"/"+t;a+="?av=1.0.0";a+="&v=1.6.1";a+="&key="+f(q.server.key);a+="&ref="+f(C.URL);a+="&referer="+f(C.referrer);a+="&base="+f(L);a+="&rand="+d();a+="&pvid="+N;a+="&aid="+q.server.id;a+="&if="+(e.top&&e.self&&e.top===e.self?0:1);q.server.get_ip?a+="&cip="+q.cip+"&ua="+q.ua:"";t!=="pf"&&q&&(q.agent=q.agent||e._br_runtime.agent,q.agent&&(a+="&n="+f(q.agent.n)));for(var i in n||{}){a+="&"+i+"="+n[i]}return a},scriptGet:function(e,r){function t(){r&&r.apply(this,arguments);n.parentNode&&n.parentNode.removeChild(n)}var n=C.createElement("script");n.setAttribute("src",e);this.sh(n,"readystatechange",function(e){("loaded"==n.readyState||4==n.readyState)&&t("loaded")},false);this.sh(n,"load",function(e){t("load");return true},false);this.sh(n,"error",function(){t("error");return true},false);var a=C.getElementsByTagName("script")[0];a&&a.parentNode.insertBefore(n,a)},GET:function(r,t){function n(){t&&t.apply(this,arguments);a.parentNode&&a.parentNode.removeChild(a)}if(e.navigator&&e.navigator.sendBeacon&&r.startsWith("http")){return e.navigator.sendBeacon(r,null)}var a=C.createElement("img");a.setAttribute("src",r);a.setAttribute("style","display:none");this.sh(a,"readystatechange",function(){("loaded"==a.readyState||4==a.readyState)&&n("loaded")},false);this.sh(a,"load",function(){n("load");return true},false);this.sh(a,"error",function(){n("error");return true},false);C.body.appendChild(a)},fpt:function(e,r,t){function n(e,r,t){var n=C.createElement(e);try{for(var a in r){n[a]=r[a]}}catch(o){var i="<"+e;for(var a in r){i+=" "+a+'="'+r[a]+'"'}i+=">";t||(i+="</"+e+">");n=C.createElement(i)}return n}var a=n("div",{style:"display:none;"});var i=n("iframe",{name:"_br_post_frm",width:0,height:0,style:"display:none;"});var o=n("form",{style:"display:none;",action:e,enctype:"application/x-www-form-urlencoded",method:"post",target:"_br_post_frm"});var s=n("input",{name:"data",type:"hidden"},true);s.value=r;o.appendChild(s);a.appendChild(i);a.appendChild(o);C.body.appendChild(a);o.submit();i.onreadystatechange=function(){("complete"===i.readyState||4===i.readyState)&&(t&&t(null,i.innerHTML),C.body.removeChild(a))};return true},POST:function(e,r,t,n,a){if(!a&&navigator&&navigator.sendBeacon&&e.startsWith("http")){var i=navigator.sendBeacon(e,r);n(!i);return i}var o=null,s=window.XDomainRequest;if(s){o=new s;o.open("POST",e);o.onload=function(){n(null,o.responseText)};this.sh(o,"load",function(){n(null,o.responseText)},false);this.sh(o,"error",function(){n("POST("+e+")error")},false);this.wrap(true,o,"onerror",function(e){return function(){n&&n("post error",o.responseText);return true}});o.send(r);return true}if(!R){return false}o=new R;o.overrideMimeType&&o.overrideMimeType("text/html");try{o._ignore=true}catch(e){}var u=0;o.onreadystatechange=function(){4==o.readyState&&200==o.status&&(0==u&&n&&n(null,o.responseText),u++)};a&&this.sh(o,"error",function(){n&&n("post error",o.responseText)});o.onerror&&this.wrap(true,o,"onerror",function(e){return function(){n&&n("post error",o.responseText);return typeof e=="function"?e.apply(this,arguments):true}});try{o.open("POST",e,true)}catch(e){}for(var c in t){o.setRequestHeader&&o.setRequestHeader(c,t[c])}o.send(r);return true},sh:function(e,r,t,n){return e.addEventListener?e.addEventListener(r,t,n):e.attachEvent?e.attachEvent("on"+r,t):false},args:function(){var e=[];![].push.apply(e,arguments);return e},stringify:u,parseJSON:function(r){if(r&&typeof r=="string"){var t=e.JSON?e.JSON.parse:function(e){return new Function("return "+e)()};return t(r)}},trim:String.prototype.trim?function(e){return null==e?"":String.prototype.trim.call(e)}:function(e){return null==e?"":e.toString().replace(/(^\s+)|(\s+$)/g,"")},extend:function(e,r){if(e&&r){for(var t in r){r.hasOwnProperty(t)&&(e[t]=r[t])}}return e},bind:function(e,r){return function(){e.apply(r,arguments)}}};var q=e._br_runtime=x.extend({st:d(),ra:[],c_ra:[],aa:[],snd_du:function(){return this.server.adu?this.server.adu*1e3:1e4},cc:function(){return this.server.ac||10}},e._br_runtime||{});var O=c();q.cip="";e._br_runtime.ua=e.navigator&&e.navigator.userAgent.replace(/;/g,"");q.server={get_ip:false,id:"1223",beacon:this.get_ip?O:"bupload.bonree.com",key:"iRiIZP9b7eQ",trace_threshold:10000.0,sr:100,upload_time:120,sip:"127.0.0.1",get_ip_url:"http://118.194.50.25:9020/getIp"};e.config_param&&x.extend(q.server,config_param);if(q.server&&(!q.server.sr||Math.random()*100<=q.server.sr)){var A=[["load",g],["beforeunload",y],["pagehide",y],["unload",y]];for(var n=0;n<A.length;n++){x.sh(e,A[n][0],A[n][1],false)}var B=[["scroll",b],["keypress",b],["click",b],["DOMContentLoaded",v],["readystatechange",m]];for(var n=0;n<B.length;n++){x.sh(C,B[n][0],B[n][1],false)}}else{H.errors=undefined;q.aa=undefined}String.prototype.startsWith||(String.prototype.startsWith=function(e,r){r=r||0;return this.indexOf(e,r)===r});var N=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+"-"+e()+e()}();var P=e.performance?e.performance:e.Performance;P&&(x.sh(P,"resourcetimingbufferfull",function(){var e=P.getEntriesByType("resource");e&&(q.ra=q.ra.concat(e),P.clearResourceTimings())},false),x.sh(P,"webkitresourcetimingbufferfull",function(){var e=P.getEntriesByType("resource");e&&(q.ra=q.ra.concat(e),P.webkitClearResourceTimings())},false));var H=q.metric={ready:function(){return q.load_time},initend:function(){function e(){H.sa()}q.end_time||(q.end_time=d(),this._h=setInterval(e,2e3))},send:function(r){function n(){function r(e){return a[e]>0?a[e]-i:0}var n={};if(P&&P.timing){var a=P.timing,i=a.navigationStart;var o=r("domainLookupStart"),s=r("domainLookupEnd"),u=r("connectStart"),c=r("connectEnd");n={ns:i,f:r("fetchStart"),qs:r("requestStart"),rs:r("responseStart"),re:r("responseEnd"),os:r("domContentLoadedEventStart"),oe:r("domContentLoadedEventEnd"),ol:r("domLoading"),oi:r("domInteractive"),oc:r("domComplete"),ls:r("loadEventStart"),le:r("loadEventEnd"),tus:r("unloadEventStart"),tue:r("unloadEventEnd"),sl:r("secureConnectionStart"),es:r("redirectStart"),ee:r("redirectEnd")};c-u>0&&(n.cs=u,n.ce=c);s-o>0&&(n.ds=o,n.de=s);0==n.le&&(n.ue=q.load_time-i);n.ue<n.ls&&(n.ue=n.ls)}else{i=q.st;n={t:i,os:q.end_time-i,ls:q.load_time-i}}n.je=H.errors.length;n.gid=t||"";var l=q.agent||e._br_runtime&&e._br_runtime.agent;l&&(n.id=f(l.id),n.a=l.a,n.q=l.q,n.tid=f(l.tid),n.n=f(l.n));n.sh=e.screen&&e.screen.height;n.sw=e.screen&&e.screen.width;return n}function a(){function e(e){return o[e]>0?Math.round(o[e]*1e3)/1e3:0}if(r<q.server.trace_threshold){return null}if(P&&P.getEntriesByType){var t={tr:true,tt:f(C.title),charset:C.characterSet},n=P.getEntriesByType("resource"),a=q.ra;if(n){a=a.concat(n);if(P.clearResourceTimings){P.clearResourceTimings()}else if(P.webkitClearResourceTimings){P.webkitClearResourceTimings()}}t.res=[];for(var i=0;i<a.length;i++){var o=a[i],s={o:e("startTime"),rt:o.initiatorType,n:o.name,f:e("fetchStart"),ds:e("domainLookupStart"),de:e("domainLookupEnd"),cs:e("connectStart"),ce:e("connectEnd"),sl:e("secureConnectionStart"),qs:e("requestStart"),re:e("responseStart"),rs:e("responseEnd"),es:e("redirectStart"),ee:e("redirectEnd")};t.res.push(s)}return t}}if(this.sended||!this.ready()){return false}var i=q.st,o={},s={};try{s=n();o=a(s.ls>0?s.ls:q.load_time-i)}catch(e){}o=o?x.stringify(o):"";var u=this;q.sended=this.sended;var c=function(e,r){if(e&&e.substr("error")){window._br_runtime.cip=q.server.sip}else{window._br_runtime.cip=r||""}q.sended=true;var t=x.mkurl(q.server.beacon,"pf",s);o.length&&x.POST(t,o,{},p("POST"))||x.GET(t);u.sa();var n=x.bind(h,u);n();H._k=setInterval(n,1e4);q.server.upload_time&&setTimeout(function(){_()&&clearInterval(H._k)&&clearInterval(H._h);q.sended=false},q.server.upload_time*1e3)};q.server.get_ip?x.POST(q.server.get_ip_url,null,null,c,true):c();return true},sa:function(e){if(q.sended&&(this.ready()||e)&&q.aa.length){var r=e||!this._last_send||d()-this._last_send>q.snd_du()||q.aa.length>=q.cc();if(r){var t=x.mkurl(q.server.beacon,"as"),n=x.stringify({xhr:q.aa}),a=q.aa.length;x.POST(t,n,{},function(e,r){e||q.aa.splice(0,a)});this._last_send=d()}}},errors:[]};var I={};e.addEventListener?x.sh(e,"error",S,false):e.onerror=function(e,r,t,n,a){var i={};i.e0=d();i.e1=e;i.e2=t;i.e3=n;i.e4=r==C.URL?"#":r;if(a){var o=w(e,t,n,a.moduleName);i.e5=a.stack||"";i.e6=a.moduleName||"";i.e7=I[o]?0:1;I[o]=true}H.errors&&H.errors.push(i)};x.wrap(false,e,"requestAnimationFrame",function(r){return function(){return q.firstPaint=d(),e.requestAnimationFrame=r,r.apply(this,arguments)}});if(R){if(R.prototype){x.wrap(false,R.prototype,"open",E);x.wrap(false,R.prototype,"send",k)}else{x.ie=7;var M=R;e.XMLHttpRequest=function(){var e=new M;x.wrap(false,e,"open",E);x.wrap(false,e,"send",k);return e}}}else{e.ActiveXObject&&(x.ie=6)}}(window);
